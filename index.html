<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manisa Hava Durumu & Telsiz Röleleri</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
body{margin:0;font-family:Arial;background:#eef2f6}
header{background:#0b4f8a;color:#fff;padding:15px;text-align:center;font-size:22px;font-weight:bold}
section{padding:15px}
h2{color:#0b4f8a}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
.card{background:#fff;border-radius:8px;padding:10px;border:1px solid #ddd}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#f2f2f2}
#map{height:420px;margin-top:10px;border-radius:8px}
footer{text-align:center;background:#0b4f8a;color:#fff;padding:10px;margin-top:20px}
.badge{padding:3px 6px;border-radius:6px;font-size:11px;background:#16a34a;color:#fff}
</style>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const apiKey = "5d6b25435d433a575d97274fc936276f";

/* İlçeler */
const districts = [
 "Ahmetli","Akhisar","Alaşehir","Demirci","Gölmarmara","Gördes","Kırkağaç",
 "Köprübaşı","Kula","Salihli","Sarıgöl","Saruhanlı","Selendi","Soma",
 "Şehzadeler","Turgutlu","Yunusemre"
];

/* RÖLELER – DOĞRU KONUMLAR */
const roles = [
 {name:"Spil Dağı VHF", lat:38.6269, lng:27.4296},
 {name:"Spil Dağı UHF", lat:38.6269, lng:27.4296},
 {name:"Soma Sivri Tepe UHF", lat:38.3247, lng:27.3668},
 {name:"Salihli Durasıllı UHF", lat:38.4863, lng:27.5279},
 {name:"Alaşehir Paşa UHF", lat:38.4528, lng:27.8425},
 {name:"Alaşehir CB Bant (27.035 – 27.275 MHz)", lat:38.4528, lng:27.8425},
 {name:"Kula Merkez UHF", lat:38.7154, lng:28.3721},
 {name:"Turgutlu Merkez UHF", lat:38.5089, lng:27.2134},
 {name:"Akhisar Merkez UHF", lat:38.9341, lng:27.8567}
];

async function getWeather(city){
 try{
  const r = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city},TR&units=metric&lang=tr&appid=${apiKey}`);
  const d = await r.json();
  return `${d.main.temp}°C – ${d.weather[0].description}`;
 }catch{
  return "Veri yok";
 }
}

window.onload = async ()=>{
 /* HAVA DURUMU */
 const container = document.getElementById("districts");
 for(const city of districts){
  const w = await getWeather(city);
  const c = document.createElement("div");
  c.className="card";
  c.innerHTML=`<b>${city}</b><br>${w}`;
  container.appendChild(c);
 }

 /* HARİTA */
 const map = L.map("map").setView([38.6,27.6],9);
 L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap"}).addTo(map);

 roles.forEach(r=>{
  L.marker([r.lat,r.lng]).addTo(map)
   .bindPopup(`<b>${r.name}</b><br><span class="badge">AKTİF</span>`);
 });
};
</script>
</head>

<body>
<header>Manisa Hava Durumu & Aktif Telsiz Röleleri</header>

<section>
<h2>İlçeler – Canlı Hava Durumu</h2>
<div class="grid" id="districts"></div>
</section>

<section>
<h2>Aktif Röleler</h2>
<table>
<tr><th>Yer</th><th>Bant</th><th>Bilgi</th></tr>
<tr><td>Spil Dağı</td><td>VHF / UHF</td><td>145.600 / 439.225</td></tr>
<tr><td>Soma Sivri Tepe</td><td>UHF</td><td>439.4125</td></tr>
<tr><td>Salihli Durasıllı</td><td>UHF</td><td>439.425</td></tr>
<tr><td>Alaşehir Paşa</td><td>UHF</td><td>439.250</td></tr>
<tr><td>Alaşehir Paşa</td><td>CB</td><td>27.035 – 27.275</td></tr>
<tr><td>Kula</td><td>UHF</td><td>439.350</td></tr>
<tr><td>Turgutlu</td><td>UHF</td><td>439.300</td></tr>
<tr><td>Akhisar</td><td>UHF</td><td>439.375</td></tr>
</table>
</section>

<section>
<h2>Harita Üzerinde Röleler</h2>
<div id="map"></div>
</section>

<footer>© 2025 Manisa Hava & Röle Bilgi Sistemi</footer>
</body>
</html>
